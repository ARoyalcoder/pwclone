import{r as n,j as e,aj as w,ak as G,al as v,am as Q,an as C,ao as S,ap as R,aq as L,E as V,ar as P,as as $,N as M,at as N,au as K,av as W,aw as X,O as D,P as J,g as A,h as E,X as Y,i as I,D as k,k as Z,l as ee,ax as p,u as z,ay as se,f as l,az as te,o as ae,aA as m,Q as re,d as oe,aB as ne,aC as ie,aD as de,aE as le,aF as ce}from"./react-vendor-CAYk1or8.js";import{c as i,u as ue,A as me,a as he,b as xe,B as x,d as fe,H as pe,C as ge,L as je,M as be,P as ye,S as Ne,e as we,f as ve,D as Ce,g as Se,h as Re,E as Le,i as Pe,j as Me,k as De,l as Ae,m as g,p as j,n as b,o as f,q as Ee}from"./pages-Ca5A-Lhs.js";import{a as Ie,d as ke,O as ze,S as Oe,U as Te}from"./vendor-DAkMYbHH.js";import"./ui-lib-BA32w1ww.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(r){if(r.ep)return;r.ep=!0;const d=a(r);fetch(r.href,d)}})();const Fe=K,Ue=W,Be=X,He=n.forwardRef(({className:s,inset:t,children:a,...o},r)=>e.jsxs(w,{ref:r,className:i("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...o,children:[a,e.jsx(G,{className:"ml-auto"})]}));He.displayName=w.displayName;const _e=n.forwardRef(({className:s,...t},a)=>e.jsx(v,{ref:a,className:i("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t}));_e.displayName=v.displayName;const O=n.forwardRef(({className:s,sideOffset:t=4,...a},o)=>e.jsx(Q,{children:e.jsx(C,{ref:o,sideOffset:t,className:i("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...a})}));O.displayName=C.displayName;const u=n.forwardRef(({className:s,inset:t,...a},o)=>e.jsx(S,{ref:o,className:i("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",s),...a}));u.displayName=S.displayName;const qe=n.forwardRef(({className:s,children:t,checked:a,...o},r)=>e.jsxs(R,{ref:r,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(L,{children:e.jsx(V,{className:"h-4 w-4"})})}),t]}));qe.displayName=R.displayName;const Ge=n.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(P,{ref:o,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(L,{children:e.jsx($,{className:"h-2 w-2 fill-current"})})}),t]}));Ge.displayName=P.displayName;const T=n.forwardRef(({className:s,inset:t,...a},o)=>e.jsx(M,{ref:o,className:i("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));T.displayName=M.displayName;const y=n.forwardRef(({className:s,...t},a)=>e.jsx(N,{ref:a,className:i("-mx-1 my-1 h-px bg-muted",s),...t}));y.displayName=N.displayName;const Qe={theme:"system",setTheme:()=>null};n.createContext(Qe);const Ve=Z,$e=ee,Ke=E,We=J,F=n.forwardRef(({className:s,...t},a)=>e.jsx(D,{className:i("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));F.displayName=D.displayName;const Xe=Ie("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),U=n.forwardRef(({side:s="right",className:t,children:a,...o},r)=>e.jsxs(We,{children:[e.jsx(F,{}),e.jsxs(A,{ref:r,className:i(Xe({side:s}),t),...o,children:[e.jsxs(E,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),a]})]}));U.displayName=A.displayName;const B=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col space-y-2 text-center sm:text-left",s),...t});B.displayName="SheetHeader";const H=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});H.displayName="SheetFooter";const _=n.forwardRef(({className:s,...t},a)=>e.jsx(I,{ref:a,className:i("text-lg font-semibold text-foreground",s),...t}));_.displayName=I.displayName;const Je=n.forwardRef(({className:s,...t},a)=>e.jsx(k,{ref:a,className:i("text-sm text-muted-foreground",s),...t}));Je.displayName=k.displayName;const Ye=()=>{const{user:s}=p(c=>c.auth),[t,{data:a,isSuccess:o}]=ue(),r=z(),d=async()=>{await t()};return n.useEffect(()=>{o&&(a!=null&&a.message)&&(ke.success(a.message),r("/login"))},[o,a==null?void 0:a.message]),e.jsxs("div",{className:"h-16 dark:bg-[#020817] bg-white border-b dark:border-b-gray-800 border-b-gray-200 fixed top-0 left-0 right-0 duration-300 z-10",children:[e.jsxs("div",{className:"max-w-7xl mx-auto hidden md:flex justify-between items-center gap-10 h-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:"30"}),e.jsx(l,{to:"/",children:e.jsx("h1",{className:"hidden md:block font-extrabold text-2xl",children:"E-Learning"})})]}),e.jsx("div",{className:"flex items-center gap-8",children:s?e.jsxs(Fe,{children:[e.jsx(Ue,{asChild:!0,children:e.jsxs(me,{children:[e.jsx(he,{src:(s==null?void 0:s.PhotoUrl)||"https://github.com/shadcn.png",alt:"@shadcn"}),e.jsx(xe,{children:"CN"})]})}),e.jsxs(O,{className:"w-56",children:[e.jsx(T,{children:"My Account"}),e.jsx(y,{}),e.jsxs(Be,{children:[e.jsx(u,{children:e.jsx(l,{to:"my-learning",children:"My learning"})}),e.jsxs(u,{children:[" ",e.jsx(l,{to:"profile",children:"Edit Profile"})," "]}),e.jsx(u,{onClick:d,children:"Log out"})]}),(s==null?void 0:s.role)==="instructor"&&e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(u,{children:e.jsx(l,{to:"/admin/dashboard",children:"Dashboard"})})]})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",onClick:()=>r("/login"),children:"Login"}),e.jsx(x,{onClick:()=>r("/login"),children:"Signup"})]})})]}),e.jsxs("div",{className:"flex md:hidden items-center justify-between px-4 h-full",children:[e.jsx("h1",{className:"font-extrabold text-2xl",children:"E-learning"}),e.jsx(Ze,{user:s})]})]})},Ze=({user:s})=>{const t=z();return e.jsxs(Ve,{children:[e.jsx($e,{asChild:!0,children:e.jsx(x,{size:"icon",className:"rounded-full hover:bg-gray-200",variant:"outline",children:e.jsx(te,{})})}),e.jsxs(U,{className:"flex flex-col",children:[e.jsx(B,{className:"flex flex-row items-center justify-between mt-2",children:e.jsxs(_,{children:[" ",e.jsx(l,{to:"/",children:"E-Learning"})]})}),e.jsx(N,{className:"mr-2"}),e.jsxs("nav",{className:"flex flex-col space-y-4",children:[e.jsx(l,{to:"/my-learning",children:"My Learning"}),e.jsx(l,{to:"/profile",children:"Edit Profile"}),e.jsx("p",{children:"Log out"})]}),(s==null?void 0:s.role)==="instructor"&&e.jsx(H,{children:e.jsx(Ke,{asChild:!0,children:e.jsx(x,{type:"submit",onClick:()=>t("/admin/dashboard"),children:"Dashboard"})})})]})]})},es=()=>e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(Ye,{}),e.jsx("div",{className:"flex-1 mt-16",children:e.jsx(ae,{})})]}),h=({children:s})=>{const{isAuthenticated:t}=p(a=>a.auth);return t?s:e.jsx(m,{to:"/login"})},ss=({children:s})=>{const{isAuthenticated:t}=p(a=>a.auth);return t?e.jsx(m,{to:"/"}):s},ts=({children:s})=>{const{user:t,isAuthenticated:a}=p(o=>o.auth);return a?(t==null?void 0:t.role)!=="instructor"?e.jsx(m,{to:"/"}):s:e.jsx(m,{to:"/login"})},as=({children:s})=>{const{courseId:t}=re(),{data:a,isLoading:o}=fe(t);return o?e.jsx(oe,{className:"w-4 h-4 animate-spin"}):a!=null&&a.purchased?s:e.jsx(m,{to:`/course-detail/${t}`})},rs=ne([{path:"/",element:e.jsx(es,{}),children:[{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(pe,{}),e.jsx(ge,{})]})},{path:"login",element:e.jsx(ss,{children:e.jsx(je,{})})},{path:"my-learning",element:e.jsx(be,{})},{path:"profile",element:e.jsx(h,{children:e.jsx(ye,{})})},{path:"course/search",element:e.jsx(h,{children:e.jsx(Ne,{})})},{path:"course-detail/:courseId",element:e.jsx(h,{children:e.jsx(we,{})})},{path:"course-progress/:courseId",element:e.jsx(h,{children:e.jsx(as,{children:e.jsx(ve,{})})})},{path:"admin",element:e.jsx(ts,{children:e.jsx(De,{})}),children:[{path:"dashboard",element:e.jsx(Ce,{})},{path:"course",element:e.jsx(Se,{})},{path:"course/create",element:e.jsx(Re,{})},{path:"course/:courseId",element:e.jsx(Le,{})},{path:"course/:courseId/lecture",element:e.jsx(Pe,{})},{path:"course/:courseId/lecture/:lectureId",element:e.jsx(Me,{})}]}]}]);function os(){return e.jsx(e.Fragment,{children:e.jsx("main",{children:e.jsx(ie,{router:rs})})})}const ns=ze({[f.reducerPath]:f.reducer,[b.reducerPath]:b.reducer,[j.reducerPath]:j.reducer,[g.reducerPath]:g.reducer,auth:Ae}),q=Oe({reducer:ns,middleware:s=>s().concat(f.middleware,b.middleware,j.middleware,g.middleware)}),is=async()=>{await q.dispatch(f.endpoints.loadUser.initiate({},{forceRefetch:!0}))};is();const ds=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[e.jsx(de,{className:"animate-spin h-16 w-16 text-blue-600"}),e.jsx("p",{className:"mt-4 text-lg font-semibold text-gray-700",children:"Loading, please wait..."})]}),ls=({children:s})=>{const{isLoading:t,isSuccess:a,isError:o,refetch:r}=Ee(void 0,{refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1});return n.useEffect(()=>{},[]),t?e.jsx(ds,{}):o?e.jsx("div",{children:"Error loading user. Please refresh."}):e.jsx(e.Fragment,{children:s})};le.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsxs(ce,{store:q,children:[e.jsx(ls,{children:e.jsx(os,{})}),e.jsx(Te,{})]})}));
